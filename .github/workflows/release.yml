name: "Release Ruby Gems & NPM Packages"

on:
  workflow_dispatch:
    inputs:
      versionBump:
        description: 'Version Bump'
        required: true
        default: 'patch'
        type: choice
        options:
        - patch
        - minor
        - major

permissions:
  contents: write
  pull-requests: write

jobs:
  release:
    runs-on: ubuntu-latest

    steps:
    - uses: "actions/checkout@v3"

    - uses: "ruby/setup-ruby@v1"
      with:
        bundler-cache: true
        ruby-version: 3.2

    - name: "echo pwd"
      run: pwd

    - name: "echo ls -al"
      run: ls -al

    - name: "echo versions"
      run: cat */lib/*/version.rb | grep VERSION

    - name: "Bump all"
      run: ./bin/bump-all

    - name: "echo versions"
      run: cat */lib/*/version.rb | grep VERSION







